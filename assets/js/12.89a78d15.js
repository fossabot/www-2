(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{390:function(e,t,s){"use strict";s.r(t);var a=s(2),n=Object(a.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("p",[e._v("You might want to lock Keybase when you power off or restart your (Linux) system.")]),e._v(" "),s("p",[e._v("It is currently not possible to lock and unlock Keybase (e.g. by using a PIN code). But it is possible to achieve this similar functionality by logging out and logging in. And on Linux, it is possible to automate that!")]),e._v(" "),s("p",[e._v("Let's automate logging out of Keybase before a system poweroff/reboot...")]),e._v(" "),s("blockquote",[s("p",[e._v("Note: This is based on Ubuntu 18.04.1 LTS, double check the paths if you're using a different Linux distribution.")])]),e._v(" "),s("div",{staticClass:"custom-block danger"},[s("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),s("p",[e._v("Setting up a systemd unit is not needed anymore. You can now choose to automatically log out via the settings in Keybase.")])]),e._v(" "),s("h2",{attrs:{id:"_1-creating-a-new-systemd-unit"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-creating-a-new-systemd-unit"}},[e._v("#")]),e._v(" 1 Creating a new systemd unit")]),e._v(" "),s("p",[e._v("Edit "),s("code",[e._v("/usr/lib/systemd/user/keybase-autologout.service")]),e._v(", e.g. with "),s("code",[e._v("nano")]),e._v(", "),s("code",[e._v("vim")]),e._v(", "),s("code",[e._v("gedit")]),e._v(", ...")]),e._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("nano")]),e._v(" /usr/lib/systemd/user/keybase-autologout.service\n")])])]),s("p",[e._v("Add the following lines to this file:")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('[Unit]\nDescription=Keybase Auto Logout\nDefaultDependencies=no\nRequires=keybase.service\n\n[Service]\nType=oneshot\nEnvironment="XDG_RUNTIME_DIR=/run/user/1000"\nExecStart=/bin/true\nExecStop=/usr/bin/keybase logout\nRemainAfterExit=true\nTimeoutSec=15\n\n[Install]\nWantedBy=default.target\n')])])]),s("blockquote",[s("p",[e._v("Note: It could be that your "),s("code",[e._v("XDG_RUNTIME_DIR")]),e._v(" is different and you need to change it accordingly.\nCheck it with "),s("code",[e._v("echo $XDG_RUNTIME_DIR")]),e._v(".")])]),e._v(" "),s("h2",{attrs:{id:"_2-enabling-the-new-systemd-unit"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-enabling-the-new-systemd-unit"}},[e._v("#")]),e._v(" 2 Enabling the new systemd unit")]),e._v(" "),s("p",[e._v("The next step is to enabe the new unit. sudo is not required because the unit is on the user level.")]),e._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[e._v("systemctl --user "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("enable")]),e._v(" keybase-autologout\n")])])]),s("h2",{attrs:{id:"_3-check-the-status"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-check-the-status"}},[e._v("#")]),e._v(" 3 Check the status")]),e._v(" "),s("p",[e._v("Check if the new systemd unit is active.")]),e._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[e._v("systemctl --user status keybase-autologout\n")])])]),s("p",[e._v("It should display:")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("Loaded: loaded (/usr/lib/systemd/user/keybase-autologout.service; enabled; vendor preset: enabled)\n")])])]),s("p",[e._v("Reboot a few times, and check if it works. Keybase should automatically log out.")]),e._v(" "),s("hr"),e._v(" "),s("h2",{attrs:{id:"disabling-and-removing"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#disabling-and-removing"}},[e._v("#")]),e._v(" Disabling and removing")]),e._v(" "),s("h3",{attrs:{id:"disabling"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#disabling"}},[e._v("#")]),e._v(" Disabling")]),e._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[e._v("systemctl --user disable keybase-autologout\n")])])]),s("h3",{attrs:{id:"removal"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#removal"}},[e._v("#")]),e._v(" Removal")]),e._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("rm")]),e._v(" /usr/lib/systemd/user/keybase-autologout.service\n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);